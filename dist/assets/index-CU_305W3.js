import{initializeApp as b}from"https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";import{getFirestore as B,collection as E,query as I,orderBy as w,onSnapshot as k}from"https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function d(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();const T={apiKey:"AIzaSyAj7nzvflTuXerUQ9LzOnn7TRojw4ZHlkc",authDomain:"velozza-events.firebaseapp.com",projectId:"velozza-events",storageBucket:"velozza-events.firebasestorage.app",messagingSenderId:"125892769650",appId:"1:125892769650:web:81deb40d2b0a7e7bb58feb",measurementId:"G-HS8GCH4040"},M=b(T),x=B(M),z=E(x,"events");function v(i){const[o,s,d]=i.split("-").map(Number);return new Date(o,s-1,d,0,0,0,0)}function H(i){return v(i).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"})}function S(i,o){const s=document.getElementById("upcomingList"),d=document.getElementById("pastList");s.innerHTML="",d.innerHTML="";const t=e=>{const p=`materiaal/event-achtergronden/${Math.floor(Math.random()*16)+1}.webp`,r=document.createElement("div");return r.className="p-3 border rounded border-white/5 relative overflow-hidden min-h-[120px]",r.innerHTML=`
            <div 
            class="absolute inset-0 bg-cover bg-center" 
            style="background-image: url('${p}');"
            ></div>
            
            <div class="absolute inset-0 bg-black/70 z-[5]"></div>
            
            <div class="relative z-10">
            <div class="text-sm text-gray-400">${H(e.date)}</div>
            <div class="font-semibold text-white">${e.name}</div>
            <div class="small text-gray-300">
                ${[e.location,e.city,e.country,e.time].filter(u=>u&&u.trim()).join(" â€” ")}
            </div>
            ${e.link?`<div><a href="${e.link}" target="_blank" class="text-blue-400 underline hover:text-red-500 transition-colors duration-300">Event Link</a></div>`:""}
            </div>
        `,r};i.length===0&&(s.innerHTML='<div class="text-gray-500">No upcoming shows.</div>'),i.forEach(e=>{s.appendChild(t(e))}),o.length===0&&(d.innerHTML='<div class="text-gray-500">No past shows.</div>'),o.forEach(e=>{d.appendChild(t(e))})}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("upcomingBtn").addEventListener("click",()=>{document.getElementById("upcomingList").classList.remove("hidden"),document.getElementById("pastList").classList.add("hidden"),document.getElementById("upcomingBtn").classList.add("bg-[var(--accent)]"),document.getElementById("upcomingBtn").classList.remove("bg-[var(--muted)]"),document.getElementById("pastBtn").classList.remove("bg-[var(--accent)]"),document.getElementById("pastBtn").classList.add("bg-[var(--muted)]")}),document.getElementById("pastBtn").addEventListener("click",()=>{document.getElementById("pastList").classList.remove("hidden"),document.getElementById("upcomingList").classList.add("hidden"),document.getElementById("pastBtn").classList.add("bg-[var(--accent)]"),document.getElementById("pastBtn").classList.remove("bg-[var(--muted)]"),document.getElementById("upcomingBtn").classList.remove("bg-[var(--accent)]"),document.getElementById("upcomingBtn").classList.add("bg-[var(--muted)]")});const i=I(z,w("date","asc"));k(i,n=>{const l=n.docs.map(m=>({id:m.id,...m.data()})),g=new Date;g.setHours(0,0,0,0);const h=l.filter(m=>v(m.date)>=g),L=l.filter(m=>v(m.date)<g).reverse();S(h,L)},n=>{console.error("Firestore snapshot error",n),document.getElementById("upcomingList").innerHTML='<div class="text-red-400">Could not load shows.</div>'}),document.getElementById("upcomingBtn").click();const o=document.getElementById("mainHeader"),s=document.getElementById("backToTopBtn"),d=200,t=100,e=400;let c=window.scrollY;function p(){const n=window.scrollY;n>d&&(n>c?o.classList.add("header-hidden"):n<c&&o.classList.remove("header-hidden")),n<=d&&o.classList.remove("header-hidden"),n>t?o.classList.add("bg-black/80","shadow-lg"):o.classList.remove("bg-black/80","shadow-lg"),n>e?(s.classList.remove("opacity-0","pointer-events-none"),s.classList.add("opacity-100")):(s.classList.remove("opacity-100"),s.classList.add("opacity-0","pointer-events-none")),c=n}window.addEventListener("scroll",p,{passive:!0}),p(),s.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const r=document.getElementById("yt-thumbs"),u=document.getElementById("yt-embed");r&&u&&r.addEventListener("click",n=>{const l=n.target.closest("button");if(l&&l.dataset.video){const g=l.dataset.video;u.src=`https://www.youtube.com/embed/${g}?autoplay=1`}});const y=document.getElementById("openBookingsModal"),f=document.getElementById("closeBookingsModal"),a=document.getElementById("bookingsModal");y&&f&&a&&(y.addEventListener("click",()=>{a.classList.remove("hidden"),document.body.style.overflow="hidden"}),f.addEventListener("click",()=>{a.classList.add("hidden"),document.body.style.overflow=""}),a.addEventListener("click",n=>{n.target===a&&(a.classList.add("hidden"),document.body.style.overflow="")}),document.addEventListener("keydown",n=>{n.key==="Escape"&&!a.classList.contains("hidden")&&(a.classList.add("hidden"),document.body.style.overflow="")}))});
